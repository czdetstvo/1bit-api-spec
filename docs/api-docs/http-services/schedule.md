---
sidebar_position: 1
---

# Schedule (Графики расписания)

**Стандартный шаблон URL (PATTERN\_URL):** /Schedule

**HTTP-Метод POST**. Возвращает расписание сотрудников по параметрам. Подробнее в описании параметра Method [ниже](#описание-параметра-method).

Является аналогом следующих веб-сервисов: GetEnlargementSchedule, GetSchedule, GetSchedule20.

## Параметры в теле запроса

|  |  |  |  |
| --- | --- | --- | --- |
| **Имя** | **Обязательный** | **Тип значения** | **Описание** |
| Key | Да | string | Значение «Ключ API» для конкретной настройки обмена |
| Method | Нет | string | Имя модели поведения сервиса. Может быть: GetSchedule, GetSchedule20 **(по умолчанию)**, GetEnlargmenetSchedule |
| StartDate | Да | dateTime | **Дата** начала периода на который получается расписания. Если указано вместе с временем - время игнорируется |
| FinishDate | Да | dateTime | **Дата** окончания периода на который получается расписания. Если указано вместе с временем - время игнорируется |
| Clinic | Нет | string | УИД клиники расписания.  Игнорируется у GetSchedule |
| Employees | Нет | string | УИД или УИДы сотрудников по которым надо выводить расписание.  Игнорируется у GetSchedule |
| Format | Нет | string | Формат результата: JSON **(по умолчанию)**,  ZipXML (архив в виде строки BASE64 с xml), ZipJSON (архив в виде строки BASE64 с json). |
| OnlyFreeTime | Нет | boolean | Возвращать только свободное время врача  Игнорируется у GetEnlargmenetSchedule |

## Описание параметра Method

Параметр «Method» является необязательным параметром, если он не задан, то обработка будет аналогичной «GetSchedule20». Параметр «Method» определяет поведение обработки:

**GetEnlargmenetSchedule** – Получение расписания сотрудников без учёта перерывов и занятого заявками клиентов времени (укрупнённого). Применяется отбор настроек обмена с сайтом и переданные в теле запроса параметры клиники (Clinic) и искомых сотрудников (Employees).

**GetSchedule** – Получение расписания на всех сотрудников (игнорируя переданный параметр УИДов сотрудников), что попадают под отбор настроек обмена с сайтом за период с начала дня StartDate по конец дня FinishDate. Время возвращается с учётом перерывов и временем, занятым заявками клиентов.

**GetSchedule20** – Получение расписания на всех сотрудников, что попадают под отбор настроек обмена с сайтом и всех параметров из тела запроса. Время возвращается с учётом перерывов и временем, занятым заявками клиентов.

Метод может вернуть пустой результат, если в базе нет данных, удовлетворяющих одновременно настройки отбора из базы и переданные в теле запроса параметры.

## Примеры

### Получение укрупнённого расписания (GetEnlargmenetSchedule)

```json
{
  "Key": "12345678-1234-1234-1234-123456789012",
  "Method": "GetEnlargmenetSchedule",
  "StartDate": "2020-01-01T00:00:00",
  "FinishDate": "2020-01-31T00:00:00",
  "Clinic": "12345678-1234-1234-1234-123456789012",
  "Employees": "12345678-1234-1234-1234-123456789012;12345678-1234-1234-1234-123456789012"
}
```

### Получение детального расписания (GetSchedule)

```json
{
  "Key": "12345678-1234-1234-1234-123456789012",
  "Method": "GetSchedule",
  "StartDate": "2020-01-01T00:00:00",
  "FinishDate": "2020-01-31T00:00:00"
}
```

### Получение детального расписания (GetSchedule20)

```json
{
  "Key": "12345678-1234-1234-1234-123456789012",
  "Method": "GetSchedule20",
  "StartDate": "2020-01-01T00:00:00",
  "FinishDate": "2020-01-31T00:00:00",
  "Clinic": "12345678-1234-1234-1234-123456789012",
  "Employees": "12345678-1234-1234-1234-123456789012;12345678-1234-1234-1234-123456789012",
  "OnlyFreeTime": true
}
```
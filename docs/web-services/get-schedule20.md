---
sidebar_position: 3
---

# GetSchedule20 (детальное расписание)

## Описание

```text
GetSchedule20(StartDate[dateTime], FinishDate[dateTime], Params[Structure])
```

`Params` – структура с отборами. Указание любого отбора не обязательно. Доступные ключи отборов:

| **Параметр**  | **Тип** | **Описание**                                                                                                                                                                                                                                                                                       |
|---------------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Clinic**    | string  | Уникальный идентификатор клиники в 1С                                                                                                                                                                                                                                                              |
| **Employees** | string  | Уникальные идентификаторы сотрудников в 1С, разделенные символом `;` (точка с запятой). Пример: <core:Value>`2eb1f97b-6a3c-11e9-936d-1856809fe650;99868528-0928-11dc-93d1-0004614ae652`</core:Value>                                                                                               |
| **Format**    | string  | Формат возвращаемого значения. <br/>Доступные форматы: <br/>`JSON` – возвращает расписание в формате json, <br/>`ZipXML` – возвращает архив в виде строки BASE64, содержащий расписание в формате xml; <br/>`ZipJSON` – возвращает архив в виде строки BASE64, содержащий расписание в формате xml |

> Возвращает расписание сотрудников с учетом перерывов и временем, занятым заявками клиентов.

## Возможные ошибки

1. Ошибка при преобразовании StartDate в дату;
2. Ошибка при преобразовании FinishDate в дату.

## Пример запроса

```xml title="Тело запроса"

<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ru="ru.umc"
               xmlns:core="http://v8.1c.ru/8.1/data/core">
    <soap:Header/>
    <soap:Body>
        <ru:GetSchedule20>
            <ru:StartDate>2022-06-01T00:00:00</ru:StartDate>
            <ru:FinishDate>2022-06-01T23:59:59</ru:FinishDate>
            <ru:Params>
                <core:Property name="Clinic">
                    <core:Value>f679444a-22b7-11df-8618-002618dcef2</core:Value>
                </core:Property>
                <core:Property name="Employees">
                    <core:Value>2eb1f97b-6a3c-11e9-936d-1856809fe650;99868528-0928-11dc-93d1-0004614ae652</core:Value>
                </core:Property>
            </ru:Params>
        </ru:GetSchedule20>
    </soap:Body>
</soap:Envelope>
```

```xml title="Тело ответа"

<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Body>
        <m:GetSchedule20Response xmlns:m="ru.umc">
            <m:return xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                <![CDATA[<?xml version="1.0"?>
                <ГрафикиДляСайта xmlns="S1" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <ГрафикДляСайта>
                        <Клиника>66abf7b4-2ff9-11df-8625-002618dcef2c</Клиника>
                        <СотрудникФИО>Безногов Юрий Сергеевич</СотрудникФИО>
                        <СотрудникID>2eb1f97b-6a3c-11e9-936d-1856809fe650</СотрудникID>
                        <Специализация>Хирургия</Специализация>
                        <ПериодыГрафика>
                            <СвободноеВремя>
                                <ПериодГрафика>
                                    <Клиника>66abf7b4-2ff9-11df-8625-002618dcef2c</Клиника>
                                    <Дата>2022-06-03T00:00:00</Дата>
                                    <ВремяНачала>2022-06-03T09:00:00</ВремяНачала>
                                    <ВремяОкончания>2022-06-03T20:00:00</ВремяОкончания>
                                    <ВидВремени>624f2a40-5aa8-4f01-83f4-0f38535364bb</ВидВремени>
                                </ПериодГрафика>
                            </СвободноеВремя>
                            <ЗанятоеВремя/>
                        </ПериодыГрафика>
                        <ДлительностьПриема>0001-01-01T00:00:00</ДлительностьПриема>
                    </ГрафикДляСайта>
                    <ГрафикДляСайта>
                        <Клиника>f679444a-22b7-11df-8618-002618dcef2c</Клиника>
                        <СотрудникФИО>Денисов Дмитрий Алексеевич</СотрудникФИО>
                        <СотрудникID>99868528-0928-11dc-93d1-0004614ae652</СотрудникID>
                        <Специализация>Терапия</Специализация>
                        <ПериодыГрафика>
                            <СвободноеВремя>
                                <ПериодГрафика>
                                    <Клиника>f679444a-22b7-11df-8618-002618dcef2c</Клиника>
                                    <Дата>2022-06-03T00:00:00</Дата>
                                    <ВремяНачала>2022-06-03T09:00:00</ВремяНачала>
                                    <ВремяОкончания>2022-06-03T12:00:00</ВремяОкончания>
                                    <ВидВремени>624f2a40-5aa8-4f01-83f4-0f38535364bb</ВидВремени>
                                </ПериодГрафика>
                                <ПериодГрафика>
                                    <Клиника>f679444a-22b7-11df-8618-002618dcef2c</Клиника>
                                    <Дата>2022-06-03T00:00:00</Дата>
                                    <ВремяНачала>2022-06-03T12:30:00</ВремяНачала>
                                    <ВремяОкончания>2022-06-03T21:00:00</ВремяОкончания>
                                    <ВидВремени>624f2a40-5aa8-4f01-83f4-0f38535364bb</ВидВремени>
                                </ПериодГрафика>
                            </СвободноеВремя>
                            <ЗанятоеВремя>
                                <ПериодГрафика>
                                    <Клиника>f679444a-22b7-11df-8618-002618dcef2c</Клиника>
                                    <Дата>2022-06-03T00:00:00</Дата>
                                    <ВремяНачала>2022-06-03T12:00:00</ВремяНачала>
                                    <ВремяОкончания>2022-06-03T12:30:00</ВремяОкончания>
                                    <ВидВремени>5210c9ac-65a2-11e9-936d-1856809fe650</ВидВремени>
                                </ПериодГрафика>
                            </ЗанятоеВремя>
                        </ПериодыГрафика>
                        <ДлительностьПриема>0001-01-01T00:00:00</ДлительностьПриема>
                    </ГрафикДляСайта>
                </ГрафикиДляСайта>
                ]]>
            </m:return>
        </m:GetSchedule20Response>
    </soap:Body>
</soap:Envelope>
```
---
sidebar_position: 6
---

# Reservation (Создание брони)

**Стандартный шаблон URL (PATTERN\_URL):** `/Reservation`

**HTTP-Метод POST**. По переданным параметрам создаёт бронь на сотрудника/оборудования в конкретную клинику на конкретное дату и время. В теле результата будет УИД созданной брони.

::::info[Связанные Сервисы]
Является аналогом веб-сервиса GetReserve.
::::

## Параметры запроса

| **Наименование** | **Обязательный** | **Тип значения** | **Описание**                                                                                                                                                                                                                |
|------------------|------------------|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Key              | Да               | string           | Значение «Ключ API» для конкретной настройки обмена                                                                                                                                                                         |
| Date             | Да               | dateTime         | **Дата**, на которую оформляется бронь. Если указано вместе с временем - время игнорируется                                                                                                                                 |
| TimeBegin        | Да               | dateTime         | **Время**, на начало которого оформляется бронь. Если указано вместе с датой - дата игнорируется                                                                                                                            |
| Duration         | Нет              | dateTime         | Планируемая длительность брони. Ожидается **время**. Если указано вместе с датой - дата игнорируется                                                                                                                        |
| Clinic           | Да               | string           | УИД клиники                                                                                                                                                                                                                 |
| EmployeeID       | Да               | string           | УИД сотрудника или оборудования, к которому оформляется бронь.  **ВАЖНО**: Для записи в кабинет (УИД оборудования) необходимо настроить учётную политику «Режим записи на приём» в значение «в кабинет», иначе будет ошибка |
| EquipmentCabinet | Нет              | string           | УИД оборудования, к которому оформляется бронь. Используется, когда нужно записать и сотрудник и кабинет/оборудования (EmployeeID будет иметь УИД сотрудника)                                                               |

### Подробное описание параметров

При формировании брони допускается указывать в качестве EmployeeID оборудование, если значение режима записи на приём учётной политики настроена как «в кабинет», иначе необходимо использовать сотрудника. Если время брони на сотрудник и/или кабинет пересекается с уже созданным, то вернётся ошибка записи документа.

## Примеры

### Создание брони в базе (GetReserve)

Создадим бронь на сотрудника и оборудование на вечер дня

```json title="Тело запроса JSON"
{
  "Key": "1111aaaa2222bbbb3333cccc4444dddd",
  "EmployeeID": "38861e66-8a01-11ef-9542-08979885f491",
  "EquipmentCabinet": "5210c9c3-65a2-11e9-936d-1856809fe650",
  "Clinic": "f679444a-22b7-11df-8618-002618dcef2c",
  "TimeBegin": "18:10:00",
  "Date": "15.10.2024"
}
```

Возвращаемый результат: Успешная запись

```json title="Тело ответа"
{
  "Ответ": {
    "Результат": "true",
    "ОписаниеОшибки": "",
    "УИД": "18b069c4-8a19-11ef-9542-08979885f491"
  }
}
```

### Пример ошибки при наложении броней

Если мы попытаемся создать новую бронь на это же время, то получим ошибку из-за наложения двух заявок.

```json title="Тело запроса JSON"
{
  "Key": "1111aaaa2222bbbb3333cccc4444dddd",
  "EmployeeID": "38861e67-8a01-11ef-9542-08979885f491",
  "Clinic": "f679444a-22b7-11df-8618-002618dcef2c",
  "TimeBegin": "18:10:00",
  "Date": "15.10.2024"
}
```

Возвращаемый результат: Ошибка при записи документа (Код ошибки 500)

```json title="Тело ответа"
{
  "Ошибка": "Не удалось записать документ. 14.10.2024 15:49:15 - {ОбщийМодуль.ВебИнтеграция.Модуль(358)}: Ошибка при вызове метода контекста (Записать): Не удалось записать: \"Заявка\"!"
}
```
